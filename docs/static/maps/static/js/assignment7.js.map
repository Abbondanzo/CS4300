{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/common/render/2d/twoDimensionConverter.ts","webpack:///./src/common/util/colors.ts","webpack:///./src/common/util/m4.ts","webpack:///./src/common/util/degrees.ts","webpack:///./src/common/setup/getScriptContentsById.ts","webpack:///./src/common/model/canvas3DShapeBuilders.ts","webpack:///./src/common/util/strings.ts","webpack:///./src/common/components/Card.tsx","webpack:///./src/common/render/2d/circle.ts","webpack:///./src/common/render/2d/rectangle.ts","webpack:///./src/common/render/2d/star.ts","webpack:///./src/common/render/2d/triangle.ts","webpack:///./src/common/setup/createProgramFromScripts.ts","webpack:///./src/common/util/numbers.ts","webpack:///./src/common/components/form/FormVector3.tsx","webpack:///./src/common/components/NavBar.tsx","webpack:///./src/common/util/objects.ts","webpack:///./src/common/render/3d/index.ts","webpack:///./src/common/render/3d/cube.ts","webpack:///./src/common/components/form/FormColor.tsx","webpack:///./src/assignment7/components/add/ShapeColorSelect.tsx","webpack:///./src/assignment7/components/add/ShapeTypeSelect.tsx","webpack:///./src/assignment7/components/add/AddShape.tsx","webpack:///./src/assignment7/components/camera/FieldOfView.tsx","webpack:///./src/assignment7/components/camera/CameraSettingsForm.tsx","webpack:///./src/assignment7/webgl/Scene.ts","webpack:///./src/assignment7/webgl/Camera.ts","webpack:///./src/assignment7/webgl/Light.ts","webpack:///./src/assignment7/components/Canvas.tsx","webpack:///./src/assignment7/hooks/useScene.ts","webpack:///./src/assignment7/components/constants.ts","webpack:///./src/assignment7/components/edit/EditShape.tsx","webpack:///./src/assignment7/components/light/LightSettingsForm.tsx","webpack:///./src/assignment7/components/list/ShapeList.tsx","webpack:///./src/assignment7/components/App.tsx","webpack:///./src/assignment7/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","7","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","this","oldJsonpFunction","slice","twoDimensionConverter","points","newPoints","hexToRgb","hex","parseRgb","exec","rgb","red","parseInt","green","blue","colorToHex","color","toString","rgbToHex","console","assert","rh","gh","bh","m4","perspective","fieldOfViewInRadians","aspect","near","far","f","Math","tan","PI","rangeInv","projection","width","height","depth","multiply","a","b","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","translation","tx","ty","tz","xRotation","angleInRadians","cos","sin","yRotation","zRotation","scaling","sx","sy","sz","translate","xRotate","yRotate","zRotate","scale","inverse","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t0","t1","t2","t3","vectorMultiply","v","dst","lookAt","cameraPosition","target","up","zAxis","normalize","subtractVectors","xAxis","cross","yAxis","sqrt","identity","transpose","degreesToRadians","degrees","radiansToDegrees","radians","getScriptContentsById","id","document","getElementById","text","buildShape","type","properties","position","x","y","z","dimensions","rotation","toFirstUpperCase","charAt","toUpperCase","toLowerCase","title","subtitle","children","className","renderCircle","gl","circle","radius","dimenScale","increment","SIDES","cx","cy","circlePoints","angle","xn","yn","bufferData","ARRAY_BUFFER","Float32Array","STATIC_DRAW","drawArrays","TRIANGLE_FAN","renderRectangle","rectangle","x1","y1","x2","y2","TRIANGLES","renderStar","star","starPoints","renderTriangle","triangle","createProgramFromScripts","vertexShaderSource","fragmentShaderSource","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","truncate","number","round","step","disabled","propChange","onChange","event","newValue","Number","style","cursor","htmlFor","aria-label","href","aria-current","objectEquality","objA","objB","shape","context","bufferCoords","normalBuffer","cube","z1","z2","A","B","C","D","E","F","G","H","posz","concat","posx","negz","negx","posy","negy","bindBuffer","normals","renderCube","error","shapeColor","setShapeColor","hexValue","SHAPE_TYPES","selected","onSelect","textAlign","map","shapeType","checked","onConfigChange","setType","setColor","fieldOfView","DEFAULT_TARGET","DEFAULT_ROTATION","props","toggleLookAt","setState","lookAtEnabled","cameraSettings","undefined","onVectorUpdate","onFOVUpdate","fovDegrees","handleKeyDown","fast","shiftKey","xBase","yBase","zBase","preventDefault","stopPropagation","handleMove","multFactor","state","Boolean","addEventListener","removeEventListener","renderLookAtToggle","FormVector3","Component","canvas","getContext","useProgram","attributeCoords","getAttribLocation","enableVertexAttribArray","createBuffer","attributeNormals","uniformColor","getUniformLocation","uniformWorldViewProjection","uniformWorldInverseTranspose","uniformReverseLightDirectionLocation","uniformResolution","uniform2f","clearCanvas","Scene","instance","Error","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","shapes","camera","light","renderSetup","clientWidth","clientHeight","cameraViewProjectionMatrix","getViewProjectionMatrix","worldViewProjectionMatrix","computeWorldViewProjectionMatrix","uniform3fv","getNormalizedDirection","forEach","uniform4f","M","computeModelViewMatrix","uniformMatrix4fv","vertexAttribPointer","FLOAT","enable","DEPTH_TEST","viewProjectionMatrix","worldMatrix","worldInverseMatrix","worldInverseTransposeMatrix","UP","fovRadians","Camera","setFOV","setTarget","viewMatrix","getViewMatrix","projectionMatrix","cameraMatrix","applyTranslation","getTargetAsMatrix","applyRotation","matrix","direction","settings","Light","lightSettings","onClick","options","canvasRef","scene","setScene","hasRendered","setHasRendered","current","init","vertexId","fragmentId","fromSettings","setCamera","setLight","render","onMouseDown","boundingRectangle","getBoundingClientRect","clientX","left","clientY","top","ref","ORIGIN","SIZE_ONE","RED_RGB","GREEN_RGB","BLUE_RGB","DEFAULT_SHAPES","DEFAULT_CAMERA_SETTINGS","DEFAULT_LIGHT_SETTINGS","onUpdate","activeShape","onColorUpdate","onDelete","FormColor","renderDeleteButton","axis","newDirection","min","max","activeShapeIndex","index","classList","join","addShapeConfig","onShapeIndexSelect","selectedShapeIndex","getActiveShape","onUpdateShape","newShapes","onDeleteShape","onAddShape","Card","maxHeight","overflow","NavBar","renderAddCard","renderListCard","renderLightCard","renderFOVCard","renderEditCard","domContainer"],"mappings":"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","file":"static/js/assignment7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t7: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = this[\"webpackJsonp\"] = this[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([42,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const twoDimensionConverter = (points: number[]) => {\n  const newPoints = [];\n  for (let i = 0; i < points.length; i++) {\n    newPoints.push(points[i]);\n    // Push every odd number (after Y is inserted)\n    if (i % 2 === 1) {\n      newPoints.push(0);\n    }\n  }\n  return newPoints;\n};\n","export const hexToRgb = (hex: string) => {\n  const parseRgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  const rgb = {\n    red: parseInt(parseRgb[1], 16),\n    green: parseInt(parseRgb[2], 16),\n    blue: parseInt(parseRgb[3], 16),\n  };\n  rgb.red /= 255;\n  rgb.green /= 255;\n  rgb.blue /= 255;\n  return rgb;\n};\n\nconst colorToHex = (color: number): string => {\n  const hex = (color * 255).toString(16);\n  return hex.length === 1 ? `0${hex}` : hex;\n};\n\nexport const rgbToHex = (color: Canvas2D.Color) => {\n  console.assert(color.red <= 1, \"Red is greater than 1\");\n  const rh = colorToHex(color.red);\n  console.assert(color.green <= 1, \"Green is greater than 1\");\n  const gh = colorToHex(color.green);\n  console.assert(color.blue <= 1, \"Blue is greater than 1\");\n  const bh = colorToHex(color.blue);\n  return `#${rh}${gh}${bh}`;\n};\n","const m4 = {\n  perspective: (\n    fieldOfViewInRadians: number,\n    aspect: number,\n    near: number,\n    far: number\n  ) => {\n    const f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewInRadians);\n    const rangeInv = 1.0 / (near - far);\n    // prettier-ignore\n    return [\n      f / aspect, 0, 0, 0,\n      0, f, 0, 0,\n      0, 0, (near + far) * rangeInv, -1,\n      0, 0, near * far * rangeInv * 2, 0\n    ];\n  },\n\n  // prettier-ignore\n  projection: (width: number, height: number, depth: number) => [\n      2 / width, 0, 0, 0,\n      0, -2 / height, 0, 0,\n      0, 0, 2 / depth, 0,\n      -1, 1, 0, 1,\n    ],\n\n  multiply: (a: number[], b: number[]) => {\n    const a00 = a[0 * 4 + 0];\n    const a01 = a[0 * 4 + 1];\n    const a02 = a[0 * 4 + 2];\n    const a03 = a[0 * 4 + 3];\n    const a10 = a[1 * 4 + 0];\n    const a11 = a[1 * 4 + 1];\n    const a12 = a[1 * 4 + 2];\n    const a13 = a[1 * 4 + 3];\n    const a20 = a[2 * 4 + 0];\n    const a21 = a[2 * 4 + 1];\n    const a22 = a[2 * 4 + 2];\n    const a23 = a[2 * 4 + 3];\n    const a30 = a[3 * 4 + 0];\n    const a31 = a[3 * 4 + 1];\n    const a32 = a[3 * 4 + 2];\n    const a33 = a[3 * 4 + 3];\n    const b00 = b[0 * 4 + 0];\n    const b01 = b[0 * 4 + 1];\n    const b02 = b[0 * 4 + 2];\n    const b03 = b[0 * 4 + 3];\n    const b10 = b[1 * 4 + 0];\n    const b11 = b[1 * 4 + 1];\n    const b12 = b[1 * 4 + 2];\n    const b13 = b[1 * 4 + 3];\n    const b20 = b[2 * 4 + 0];\n    const b21 = b[2 * 4 + 1];\n    const b22 = b[2 * 4 + 2];\n    const b23 = b[2 * 4 + 3];\n    const b30 = b[3 * 4 + 0];\n    const b31 = b[3 * 4 + 1];\n    const b32 = b[3 * 4 + 2];\n    const b33 = b[3 * 4 + 3];\n    // prettier-ignore\n    return [\n      b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,\n      b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,\n      b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,\n      b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,\n      b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,\n      b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,\n      b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,\n      b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,\n      b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,\n      b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,\n      b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,\n      b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,\n      b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,\n      b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,\n      b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,\n      b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33,\n    ];\n  },\n\n  // prettier-ignore\n  translation: (tx: number, ty: number, tz: number) => [\n    1,  0,  0,  0,\n    0,  1,  0,  0,\n    0,  0,  1,  0,\n    tx, ty, tz, 1,\n  ],\n\n  xRotation: (angleInRadians: number) => {\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    // prettier-ignore\n    return [\n      1, 0, 0, 0,\n      0, c, s, 0,\n      0, -s, c, 0,\n      0, 0, 0, 1,\n    ];\n  },\n\n  yRotation: (angleInRadians: number) => {\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    // prettier-ignore\n    return [\n      c, 0, -s, 0,\n      0, 1, 0, 0,\n      s, 0, c, 0,\n      0, 0, 0, 1,\n    ];\n  },\n\n  zRotation: (angleInRadians: number) => {\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    // prettier-ignore\n    return [\n      c, s, 0, 0,\n      -s, c, 0, 0,\n      0, 0, 1, 0,\n      0, 0, 0, 1,\n    ];\n  },\n\n  // prettier-ignore\n  scaling: (sx: number, sy: number, sz: number) => [\n    sx, 0,  0,  0,\n    0, sy,  0,  0,\n    0,  0, sz,  0,\n    0,  0,  0,  1,\n  ],\n\n  translate: (m: number[], tx: number, ty: number, tz: number) =>\n    m4.multiply(m, m4.translation(tx, ty, tz)),\n\n  xRotate: (m: number[], angleInRadians: number) =>\n    m4.multiply(m, m4.xRotation(angleInRadians)),\n\n  yRotate: (m: number[], angleInRadians: number) =>\n    m4.multiply(m, m4.yRotation(angleInRadians)),\n\n  zRotate: (m: number[], angleInRadians: number) =>\n    m4.multiply(m, m4.zRotation(angleInRadians)),\n\n  scale: (m: number[], sx: number, sy: number, sz: number) =>\n    m4.multiply(m, m4.scaling(sx, sy, sz)),\n\n  inverse: (m: number[]) => {\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n    const tmp_0 = m22 * m33;\n    const tmp_1 = m32 * m23;\n    const tmp_2 = m12 * m33;\n    const tmp_3 = m32 * m13;\n    const tmp_4 = m12 * m23;\n    const tmp_5 = m22 * m13;\n    const tmp_6 = m02 * m33;\n    const tmp_7 = m32 * m03;\n    const tmp_8 = m02 * m23;\n    const tmp_9 = m22 * m03;\n    const tmp_10 = m02 * m13;\n    const tmp_11 = m12 * m03;\n    const tmp_12 = m20 * m31;\n    const tmp_13 = m30 * m21;\n    const tmp_14 = m10 * m31;\n    const tmp_15 = m30 * m11;\n    const tmp_16 = m10 * m21;\n    const tmp_17 = m20 * m11;\n    const tmp_18 = m00 * m31;\n    const tmp_19 = m30 * m01;\n    const tmp_20 = m00 * m21;\n    const tmp_21 = m20 * m01;\n    const tmp_22 = m00 * m11;\n    const tmp_23 = m10 * m01;\n\n    const t0 =\n      tmp_0 * m11 +\n      tmp_3 * m21 +\n      tmp_4 * m31 -\n      (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\n    const t1 =\n      tmp_1 * m01 +\n      tmp_6 * m21 +\n      tmp_9 * m31 -\n      (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\n    const t2 =\n      tmp_2 * m01 +\n      tmp_7 * m11 +\n      tmp_10 * m31 -\n      (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\n    const t3 =\n      tmp_5 * m01 +\n      tmp_8 * m11 +\n      tmp_11 * m21 -\n      (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\n\n    const d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n\n    return [\n      d * t0,\n      d * t1,\n      d * t2,\n      d * t3,\n      d *\n        (tmp_1 * m10 +\n          tmp_2 * m20 +\n          tmp_5 * m30 -\n          (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30)),\n      d *\n        (tmp_0 * m00 +\n          tmp_7 * m20 +\n          tmp_8 * m30 -\n          (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30)),\n      d *\n        (tmp_3 * m00 +\n          tmp_6 * m10 +\n          tmp_11 * m30 -\n          (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30)),\n      d *\n        (tmp_4 * m00 +\n          tmp_9 * m10 +\n          tmp_10 * m20 -\n          (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20)),\n      d *\n        (tmp_12 * m13 +\n          tmp_15 * m23 +\n          tmp_16 * m33 -\n          (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33)),\n      d *\n        (tmp_13 * m03 +\n          tmp_18 * m23 +\n          tmp_21 * m33 -\n          (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33)),\n      d *\n        (tmp_14 * m03 +\n          tmp_19 * m13 +\n          tmp_22 * m33 -\n          (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33)),\n      d *\n        (tmp_17 * m03 +\n          tmp_20 * m13 +\n          tmp_23 * m23 -\n          (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23)),\n      d *\n        (tmp_14 * m22 +\n          tmp_17 * m32 +\n          tmp_13 * m12 -\n          (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22)),\n      d *\n        (tmp_20 * m32 +\n          tmp_12 * m02 +\n          tmp_19 * m22 -\n          (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02)),\n      d *\n        (tmp_18 * m12 +\n          tmp_23 * m32 +\n          tmp_15 * m02 -\n          (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12)),\n      d *\n        (tmp_22 * m22 +\n          tmp_16 * m02 +\n          tmp_21 * m12 -\n          (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02)),\n    ];\n  },\n\n  vectorMultiply: (v: number[], m: number[]) => {\n    let dst = [];\n    for (let i = 0; i < 4; ++i) {\n      dst[i] = 0.0;\n      for (let j = 0; j < 4; ++j) {\n        dst[i] += v[j] * m[j * 4 + i];\n      }\n    }\n    return dst;\n  },\n\n  lookAt: (cameraPosition: number[], target: number[], up: number[]) => {\n    var zAxis = m4.normalize(m4.subtractVectors(cameraPosition, target));\n    var xAxis = m4.normalize(m4.cross(up, zAxis));\n    var yAxis = m4.normalize(m4.cross(zAxis, xAxis));\n    // prettier-ignore\n    return [\n      xAxis[0], xAxis[1], xAxis[2], 0,\n      yAxis[0], yAxis[1], yAxis[2], 0,\n      zAxis[0], zAxis[1], zAxis[2], 0,\n      cameraPosition[0],\n      cameraPosition[1],\n      cameraPosition[2],\n      1,\n    ];\n  },\n\n  normalize: (v: number[]) => {\n    var length = Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\n    // make sure we don't divide by 0.\n    if (length > 0.00001) {\n      return [v[0] / length, v[1] / length, v[2] / length];\n    } else {\n      return [0, 0, 0];\n    }\n  },\n\n  cross: (a: number[], b: number[]) => {\n    return [\n      a[1] * b[2] - a[2] * b[1],\n      a[2] * b[0] - a[0] * b[2],\n      a[0] * b[1] - a[1] * b[0],\n    ];\n  },\n\n  subtractVectors: (a: number[], b: number[]) => {\n    return [a[0] - b[0], a[1] - b[1], a[2] - b[2]];\n  },\n\n  // prettier-ignore\n  identity: () => [\n    1,  0,  0,  0,\n    0,  1,  0,  0,\n    0,  0,  1,  0,\n    0,  0,  0,  1,\n  ],\n\n  transpose: (m: number[]) => {\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n\n    // prettier-ignore\n    return [m00, m10, m20, m30,\n            m01, m11, m21, m31,\n            m02, m12, m22, m32,\n            m03, m13, m23, m33]\n  },\n};\n\nexport default m4;\n","import { truncate } from \"./numbers\";\n\nexport const degreesToRadians = (degrees: number) => {\n  return ((degrees % 360) * Math.PI) / 180;\n};\n\nexport const radiansToDegrees = (radians: number) => {\n  return truncate((radians * 180) / Math.PI) % 360;\n};\n","export const getScriptContentsById = (id: string): string => {\n  const element = document.getElementById(id) as HTMLScriptElement;\n  return element.text;\n};\n","export const buildShape = (\n  type: Canvas3D.ShapeType,\n  properties: Partial<Canvas3D.Shape> = {}\n): Canvas3D.Shape => {\n  return {\n    type,\n    position: {\n      x: 0,\n      y: 0,\n      z: 0,\n    },\n    dimensions: {\n      width: 1,\n      height: 1,\n      depth: 1,\n    },\n    color: {\n      red: 0,\n      green: 0,\n      blue: 0,\n    },\n    translation: { x: 0, y: 0, z: 0 },\n    rotation: { x: 0, y: 0, z: 0 },\n    scale: { x: 1, y: 1, z: 1 },\n    ...properties,\n  };\n};\n","export const toFirstUpperCase = (name: string) =>\n  name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();\n","import React from \"react\";\n\ninterface Props {\n  title: string;\n  subtitle?: string;\n  children?: React.ReactNode;\n}\n\nconst Card = ({ title, subtitle, children }: Props) => {\n  return (\n    <div className=\"card\">\n      <div className=\"card-body\">\n        <h5 className=\"card-title\">{title}</h5>\n        {subtitle && (\n          <h6 className=\"card-subtitle mb-2 text-muted\">{subtitle}</h6>\n        )}\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default Card;\n","import { twoDimensionConverter } from \"./twoDimensionConverter\";\n\n/**\n * Renders a n-side polygon as a circle inside the given webGL context.\n *\n * @param gl rendering context\n * @param circle dimensions holder\n */\nexport const renderCircle = (\n  gl: WebGLRenderingContext,\n  circle: Canvas2D.Circle | Canvas3D.Circle\n) => {\n  const radius = circle.dimensions.height / 2;\n  const dimenScale = circle.dimensions.width / circle.dimensions.height;\n  const increment = (Math.PI * 2) / SIDES;\n  const cx = circle.position.x;\n  const cy = circle.position.y;\n  // Generate points based on unit circle\n  let circlePoints = [cx, cy];\n  for (let n = SIDES; n >= 0; n--) {\n    const angle = n * increment;\n    const xn = cx + radius * Math.cos(angle) * dimenScale;\n    const yn = cy - radius * Math.sin(angle);\n    circlePoints.push(xn, yn);\n  }\n\n  const is3D = \"z\" in circle.position;\n  if (is3D) {\n    circlePoints = twoDimensionConverter(circlePoints);\n  }\n\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array(circlePoints),\n    gl.STATIC_DRAW\n  );\n  gl.drawArrays(gl.TRIANGLE_FAN, 0, SIDES + 2);\n};\n\nconst SIDES = 24;\n","import { twoDimensionConverter } from \"./twoDimensionConverter\";\n\nexport const renderRectangle = (\n  gl: WebGLRenderingContext,\n  rectangle: Canvas2D.Rectangle | Canvas3D.Rectangle\n) => {\n  const x1 = rectangle.position.x - rectangle.dimensions.width / 2;\n  const y1 = rectangle.position.y - rectangle.dimensions.height / 2;\n  const x2 = rectangle.position.x + rectangle.dimensions.width / 2;\n  const y2 = rectangle.position.y + rectangle.dimensions.height / 2;\n  let points = [x1, y1, x2, y1, x1, y2, x1, y2, x2, y1, x2, y2];\n\n  const is3D = \"z\" in rectangle.position;\n  if (is3D) {\n    points = twoDimensionConverter(points);\n  }\n\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(points), gl.STATIC_DRAW);\n  gl.drawArrays(gl.TRIANGLES, 0, 6);\n};\n","import { twoDimensionConverter } from \"./twoDimensionConverter\";\n\n/**\n * Renders a 5-pointed star inside the given webGL context.\n *\n * 2:33am geometry is good geometry\n *\n * @param gl rendering context\n * @param star dimensions holder\n */\nexport const renderStar = (\n  gl: WebGLRenderingContext,\n  star: Canvas2D.Star | Canvas3D.Star\n) => {\n  const radius = star.dimensions.height / 2;\n  const dimenScale = star.dimensions.width / star.dimensions.height;\n  const increment = (Math.PI * 2) / 5;\n  const cx = star.position.x;\n  const cy = star.position.y;\n  // Generate points from top, clockwise\n  const starPoints = {};\n  for (let n = 0; n < 5; n++) {\n    const angle = Math.PI / 2 - n * increment;\n    const xn = cx + radius * Math.cos(angle) * dimenScale;\n    const yn = cy - radius * Math.sin(angle);\n    starPoints[`${n + 1}`] = [xn, yn];\n  }\n  // Generate sixth point below center\n  starPoints[\"6\"] = [\n    cx,\n    cy + radius * (Math.tan((1 / 5) * Math.PI) - Math.tan((1 / 10) * Math.PI)),\n  ];\n  // Produce three triangles that compose the star\n  const t1 = [...starPoints[\"1\"], ...starPoints[\"3\"], ...starPoints[\"6\"]];\n  const t2 = [...starPoints[\"1\"], ...starPoints[\"6\"], ...starPoints[\"4\"]];\n  const t3 = [...starPoints[\"5\"], ...starPoints[\"2\"], ...starPoints[\"6\"]];\n\n  let points = [...t1, ...t2, ...t3];\n\n  const is3D = \"z\" in star.position;\n  if (is3D) {\n    points = twoDimensionConverter(points);\n  }\n\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(points), gl.STATIC_DRAW);\n  gl.drawArrays(gl.TRIANGLES, 0, 3 * 3);\n};\n","import { twoDimensionConverter } from \"./twoDimensionConverter\";\n\nexport const renderTriangle = (\n  gl: WebGLRenderingContext,\n  triangle: Canvas2D.Triangle | Canvas3D.Triangle\n) => {\n  const x1 = triangle.position.x - triangle.dimensions.width / 2;\n  const y1 = triangle.position.y + triangle.dimensions.height / 2;\n  const x2 = triangle.position.x + triangle.dimensions.width / 2;\n  const y2 = triangle.position.y + triangle.dimensions.height / 2;\n  const x3 = triangle.position.x;\n  const y3 = triangle.position.y - triangle.dimensions.height / 2;\n\n  let points = [x1, y1, x3, y3, x2, y2];\n\n  const is3D = \"z\" in triangle.position;\n  if (is3D) {\n    points = twoDimensionConverter(points);\n  }\n\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(points), gl.STATIC_DRAW);\n  gl.drawArrays(gl.TRIANGLES, 0, 3);\n};\n","export const createProgramFromScripts = (\n  gl: WebGLRenderingContext,\n  vertexShaderSource: string,\n  fragmentShaderSource: string\n) => {\n  // Create GLSL shaders, upload the GLSL source, compile the shaders\n  const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, vertexShaderSource);\n  gl.compileShader(vertexShader);\n\n  const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, fragmentShaderSource);\n  gl.compileShader(fragmentShader);\n\n  // Link the two shaders into a program\n  const program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n\n  return program;\n};\n","export const truncate = (number: number) => {\n  return Math.round(number * 100) / 100;\n};\n","import React from \"react\";\n\ninterface Props {\n  title: string;\n  value: Canvas3D.Vector3;\n  step: number;\n  disabled?: boolean;\n  onChange(value: Canvas3D.Vector3): void;\n}\n\nconst FormVector3 = ({\n  title,\n  value,\n  step,\n  disabled,\n  onChange: propChange,\n}: Props) => {\n  const onChange = (key: keyof Canvas3D.Vector3) => (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const newValue = Number(event.target.value);\n    propChange({ ...value, [key]: newValue });\n  };\n\n  return (\n    <div className=\"form-row\">\n      <div className=\"col-md-12\">\n        {title} [\n        <label style={{ cursor: \"pointer\" }} htmlFor={`form-${title}-x`}>\n          X\n        </label>\n        ,{\" \"}\n        <label style={{ cursor: \"pointer\" }} htmlFor={`form-${title}-y`}>\n          Y\n        </label>\n        ,{\" \"}\n        <label style={{ cursor: \"pointer\" }} htmlFor={`form-${title}-z`}>\n          Z\n        </label>\n        ]\n      </div>\n      <div className=\"form-group col-md-4\">\n        <input\n          type=\"number\"\n          className=\"form-control\"\n          id={`form-${title}-x`}\n          disabled={disabled}\n          step={step}\n          value={value.x}\n          onChange={onChange(\"x\")}\n        />\n      </div>\n      <div className=\"form-group col-md-4\">\n        <input\n          type=\"number\"\n          className=\"form-control\"\n          id={`form-${title}-y`}\n          disabled={disabled}\n          step={step}\n          value={value.y}\n          onChange={onChange(\"y\")}\n        />\n      </div>\n      <div className=\"form-group col-md-4\">\n        <input\n          type=\"number\"\n          className=\"form-control\"\n          id={`form-${title}-z`}\n          disabled={disabled}\n          step={step}\n          value={value.z}\n          onChange={onChange(\"z\")}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default FormVector3;\n","import React from \"react\";\n\ninterface Props {\n  title: string;\n}\n\nconst NavBar = ({ title }: Props) => {\n  document.title = title;\n  return (\n    <>\n      <nav aria-label=\"breadcrumb\">\n        <ol className=\"breadcrumb\">\n          <li className=\"breadcrumb-item\">\n            <a href=\"/\">Home</a>\n          </li>\n          <li className=\"breadcrumb-item active\" aria-current=\"page\">\n            {title}\n          </li>\n        </ol>\n      </nav>\n      <h1>{title}</h1>\n    </>\n  );\n};\n\nexport default NavBar;\n","import equal from \"fast-deep-equal\";\n\nexport const objectEquality = <T extends object>(objA: T, objB: T): boolean => {\n  return equal(objA, objB);\n};\n","import { renderCircle } from \"../2d/circle\";\nimport { renderRectangle } from \"../2d/rectangle\";\nimport { renderStar } from \"../2d/star\";\nimport { renderTriangle } from \"../2d/triangle\";\nimport { renderCube } from \"./cube\";\n\n// TODO: These options should be placed in a singleton vault\ninterface RenderOptions {\n  shape: Canvas3D.Shape;\n  context: WebGLRenderingContext;\n  bufferCoords: WebGLBuffer;\n  normalBuffer: WebGLBuffer | null;\n}\n\nexport const renderShape = ({\n  shape,\n  context,\n  bufferCoords,\n  normalBuffer,\n}: RenderOptions) => {\n  switch (shape.type) {\n    case \"CUBE\":\n      renderCube(context, shape as Canvas3D.Cube, bufferCoords, normalBuffer);\n      break;\n    case \"RECTANGLE\":\n      renderRectangle(context, shape as Canvas3D.Rectangle);\n      break;\n    case \"TRIANGLE\":\n      renderTriangle(context, shape as Canvas3D.Triangle);\n      break;\n    case \"CIRCLE\":\n      renderCircle(context, shape as Canvas3D.Circle);\n      break;\n    case \"STAR\":\n      renderStar(context, shape as Canvas3D.Star);\n      break;\n    default:\n      console.error(\"Rendering unhandled shape type\", shape);\n  }\n};\n","export const renderCube = (\n  gl: WebGLRenderingContext,\n  cube: Canvas3D.Cube,\n  bufferCoords: WebGLBuffer,\n  normalBuffer: WebGLBuffer | null\n) => {\n  const x1 = cube.position.x - cube.dimensions.width / 2;\n  const y1 = cube.position.y - cube.dimensions.height / 2;\n  const z1 = cube.position.z + cube.dimensions.depth / 2;\n  const x2 = cube.position.x + cube.dimensions.width / 2;\n  const y2 = cube.position.y + cube.dimensions.height / 2;\n  const z2 = cube.position.z - cube.dimensions.depth / 2;\n\n  // Front face\n  const A = [x1, y2, z1]; // TL\n  const B = [x2, y2, z1]; // TR\n  const C = [x2, y1, z1]; // BR\n  const D = [x1, y1, z1]; // BL\n\n  // Back face (looking thru front)\n  const E = [x1, y2, z2]; // TL\n  const F = [x2, y2, z2]; // TR\n  const G = [x2, y1, z2]; // BR\n  const H = [x1, y1, z2]; // BL\n\n  const posz = [].concat(A, B, C, A, C, D); // front\n  const posx = [].concat(B, F, G, B, G, C); // right\n  const negz = [].concat(F, E, H, F, H, G); // back\n  const negx = [].concat(E, A, D, E, D, H); // left\n  const posy = [].concat(A, E, F, A, F, B); // top\n  const negy = [].concat(D, C, G, D, G, H); // bottom\n\n  const points = [].concat(posz, posx, negz, negx, posy, negy);\n  gl.bindBuffer(gl.ARRAY_BUFFER, bufferCoords);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(points), gl.STATIC_DRAW);\n\n  if (normalBuffer) {\n    const front = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1];\n    const right = [1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0];\n    const back = [0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1];\n    const left = [-1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0];\n    const top = [0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0];\n    const bottom = [0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0];\n    const normals = [].concat(front, right, back, left, top, bottom);\n    gl.bindBuffer(gl.ARRAY_BUFFER, normalBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(normals), gl.STATIC_DRAW);\n  }\n\n  gl.drawArrays(gl.TRIANGLES, 0, 36);\n};\n","import { hexToRgb, rgbToHex } from \"@common/util/colors\";\nimport React from \"react\";\n\ninterface Props {\n  color: Canvas3D.Color;\n  onChange(color: Canvas3D.Color): void;\n}\n\nconst FormColor = ({ color, onChange: propChange }: Props) => {\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const color = hexToRgb(event.target.value);\n    propChange(color);\n  };\n\n  return (\n    <div className=\"form-row\">\n      <div className=\"form-group col-md-12\">\n        <label htmlFor=\"form-color\">Color</label>\n        <input\n          type=\"color\"\n          className=\"form-control\"\n          id=\"form-color\"\n          value={rgbToHex(color)}\n          onChange={onChange}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default FormColor;\n","import { hexToRgb, rgbToHex } from \"@common/util/colors\";\nimport React from \"react\";\n\ninterface Props {\n  shapeColor: Canvas2D.Color;\n  setShapeColor: (color: Canvas2D.Color) => void;\n}\n\nconst ShapeColorSelect = ({ shapeColor, setShapeColor }: Props) => {\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const hexValue = event.target.value;\n    const color = hexToRgb(hexValue);\n    setShapeColor(color);\n  };\n\n  return (\n    <input\n      type=\"color\"\n      className=\"form-control\"\n      id=\"sx\"\n      value={rgbToHex(shapeColor)}\n      onChange={onChange}\n    />\n  );\n};\n\nexport default ShapeColorSelect;\n","import { toFirstUpperCase } from \"@common/util/strings\";\nimport React from \"react\";\n\ninterface Props {\n  selected: Canvas3D.ShapeType;\n  onSelect: (shape: Canvas3D.ShapeType) => void;\n}\n\nconst SHAPE_TYPES: Canvas3D.ShapeType[] = [\n  \"RECTANGLE\",\n  \"TRIANGLE\",\n  \"STAR\",\n  \"CIRCLE\",\n  \"CUBE\",\n];\n\nconst ShapeTypeSelect = ({ selected, onSelect }: Props) => {\n  const onChange = (event: React.ChangeEvent<HTMLFieldSetElement>) => {\n    const { value } = event.target as any;\n    onSelect(value);\n  };\n\n  return (\n    <fieldset\n      name=\"shape\"\n      className=\"form-group\"\n      onChange={onChange}\n      style={{ textAlign: \"center\" }}\n    >\n      {SHAPE_TYPES.map((shapeType) => {\n        const id = `radio-${shapeType.toLowerCase()}`;\n        return (\n          <div key={id} className=\"form-check form-check-inline\">\n            <input\n              id={id}\n              className=\"form-check-input\"\n              type=\"radio\"\n              value={shapeType}\n              checked={shapeType === selected}\n              onChange={() => {}}\n            />\n            <label className=\"form-check-label\" htmlFor={id}>\n              {toFirstUpperCase(shapeType)}\n            </label>\n          </div>\n        );\n      })}\n    </fieldset>\n  );\n};\n\nexport default ShapeTypeSelect;\n","import React, { useEffect, useState } from \"react\";\n\nimport ShapeColorSelect from \"./ShapeColorSelect\";\nimport ShapeTypeSelect from \"./ShapeTypeSelect\";\n\ntype AddShapeConfig = Pick<Canvas3D.Shape, \"type\" | \"color\">;\n\ninterface Props {\n  onConfigChange(config: AddShapeConfig): void;\n}\n\nconst AddShape = ({ onConfigChange }: Props) => {\n  const [type, setType] = useState<Canvas3D.ShapeType>(\"RECTANGLE\");\n  const [color, setColor] = useState<Canvas3D.Color>({\n    red: 0,\n    green: 1,\n    blue: 0,\n  });\n\n  useEffect(() => {\n    onConfigChange({ type, color });\n  }, [type, color]);\n\n  return (\n    <>\n      <ShapeTypeSelect selected={type} onSelect={setType} />\n      <ShapeColorSelect shapeColor={color} setShapeColor={setColor} />\n    </>\n  );\n};\n\nexport default AddShape;\n","import React from \"react\";\n\ninterface Props {\n  fieldOfView: number; // degrees\n  onChange(fieldOfView: number): void;\n}\n\nconst FieldOfView = ({ fieldOfView, onChange: propChange }: Props) => {\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const value = Number(event.target.value);\n    propChange(value);\n  };\n  return (\n    <div className=\"form-row\">\n      <div className=\"form-group col-md-12\">\n        <label htmlFor=\"form-fov\">Degrees</label>\n        <input\n          type=\"number\"\n          className=\"form-control\"\n          id=\"form-fov\"\n          value={fieldOfView}\n          step=\"2\"\n          onChange={onChange}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default FieldOfView;\n","import FormVector3 from \"@common/components/form/FormVector3\";\nimport React from \"react\";\n\nimport { CameraSettings } from \"../../webgl/Camera\";\nimport FieldOfView from \"./FieldOfView\";\n\nconst DEFAULT_TARGET: Canvas3D.Vector3 = { x: 0, y: 0, z: 0 };\nconst DEFAULT_ROTATION: Canvas3D.Vector3 = { x: 0, y: 0, z: 0 };\n\ninterface Props {\n  cameraSettings: CameraSettings;\n  onChange(cameraSettings: CameraSettings): void;\n}\n\ninterface State {\n  lookAtEnabled: boolean;\n}\n\nclass CameraSettingsForm extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      lookAtEnabled: Boolean(props.cameraSettings.target),\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  renderLookAtToggle() {\n    return (\n      <div className=\"form-row\">\n        <div className=\"form-group col-md-12\">\n          <div className=\"form-check\">\n            <input\n              type=\"checkbox\"\n              className=\"form-check-input\"\n              id=\"look-at-toggle\"\n              checked={this.state.lookAtEnabled}\n              onChange={this.toggleLookAt}\n            />\n            <label className=\"form-check-label\" htmlFor=\"look-at-toggle\">\n              Enable \"Look At\" (disables key controls)\n            </label>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  private readonly toggleLookAt = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const { checked } = event.target;\n    this.setState({\n      lookAtEnabled: checked,\n    });\n    const { onChange, cameraSettings } = this.props;\n    if (checked) {\n      onChange({\n        ...cameraSettings,\n        target: cameraSettings.target || DEFAULT_TARGET,\n      });\n    } else {\n      onChange({\n        ...cameraSettings,\n        target: undefined,\n        rotation: cameraSettings.rotation || DEFAULT_ROTATION,\n      });\n    }\n  };\n\n  render() {\n    const { lookAtEnabled } = this.state;\n    const {\n      fovDegrees,\n      translation,\n      rotation,\n      target,\n    } = this.props.cameraSettings;\n\n    return (\n      <form>\n        {this.renderLookAtToggle()}\n        <FieldOfView fieldOfView={fovDegrees} onChange={this.onFOVUpdate} />\n        <FormVector3\n          disabled={!lookAtEnabled}\n          title=\"Target\"\n          value={target || DEFAULT_TARGET}\n          step={5}\n          onChange={this.onVectorUpdate(\"target\")}\n        />\n        <FormVector3\n          title=\"Translation\"\n          value={translation}\n          step={5}\n          onChange={this.onVectorUpdate(\"translation\")}\n        />\n        <FormVector3\n          disabled={lookAtEnabled}\n          title=\"Rotation\"\n          value={rotation || DEFAULT_ROTATION}\n          step={2}\n          onChange={this.onVectorUpdate(\"rotation\")}\n        />\n      </form>\n    );\n  }\n\n  private readonly onVectorUpdate = (\n    key: \"translation\" | \"target\" | \"rotation\"\n  ) => (value: Canvas3D.Vector3) => {\n    const { onChange, cameraSettings } = this.props;\n    onChange({ ...cameraSettings, [key]: value });\n  };\n\n  private readonly onFOVUpdate = (fovDegrees: number) => {\n    const { onChange, cameraSettings } = this.props;\n    onChange({ ...cameraSettings, fovDegrees });\n  };\n\n  private readonly handleKeyDown = (event: KeyboardEvent) => {\n    // These keys should only change translation when not focused on target. For future assignment work\n    if (this.props.cameraSettings.target !== undefined) {\n      return;\n    }\n\n    const fast = event.shiftKey;\n    let xBase = 0;\n    let yBase = 0;\n    let zBase = 0;\n    switch (event.key) {\n      case \"W\":\n      case \"w\":\n        zBase = -1;\n        break;\n      case \"A\":\n      case \"a\":\n        xBase = -1;\n        break;\n      case \"S\":\n      case \"s\":\n        zBase = 1;\n        break;\n      case \"D\":\n      case \"d\":\n        xBase = 1;\n        break;\n      case \" \":\n        yBase = 1;\n        break;\n      case \"Control\":\n        yBase = -1;\n        break;\n    }\n\n    if (xBase !== 0 || yBase !== 0 || zBase !== 0) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.handleMove(xBase, yBase, zBase, fast);\n    }\n  };\n\n  private readonly handleMove = (\n    x: number,\n    y: number,\n    z: number,\n    fast: boolean\n  ) => {\n    const multFactor = fast ? 5 : 2;\n    const { cameraSettings, onChange } = this.props;\n    const translation = {\n      x: cameraSettings.translation.x += x * multFactor,\n      y: cameraSettings.translation.y += y * multFactor,\n      z: cameraSettings.translation.z += z * multFactor,\n    };\n    onChange({\n      ...cameraSettings,\n      translation,\n    });\n  };\n}\n\nexport default CameraSettingsForm;\n","import { renderShape } from \"@common/render/3d\";\nimport { createProgramFromScripts } from \"@common/setup/createProgramFromScripts\";\nimport { degreesToRadians } from \"@common/util/degrees\";\nimport m4 from \"@common/util/m4\";\n\nimport Camera from \"./Camera\";\nimport Light from \"./Light\";\n\nconst DIMENSIONS = 3;\n\nexport default class Scene {\n  private readonly gl: WebGLRenderingContext;\n  private readonly attributeCoords: number;\n  private readonly attributeNormals: number;\n  private readonly bufferCoords: WebGLBuffer;\n  private readonly normalBuffer: WebGLBuffer;\n  private readonly uniformColor: WebGLUniformLocation;\n  private readonly uniformWorldViewProjection: WebGLUniformLocation;\n  private readonly uniformWorldInverseTranspose: WebGLUniformLocation;\n  private readonly uniformReverseLightDirectionLocation: WebGLUniformLocation;\n\n  private constructor(\n    canvas: HTMLCanvasElement,\n    vertexShaderSource: string,\n    fragmentShaderSource: string\n  ) {\n    this.gl = canvas.getContext(\"webgl\");\n\n    // create and use a GLSL program\n    const program = createProgramFromScripts(\n      this.gl,\n      vertexShaderSource,\n      fragmentShaderSource\n    );\n    this.gl.useProgram(program);\n\n    // Set up coordinate attributes for sending to each vertex\n    this.attributeCoords = this.gl.getAttribLocation(program, \"a_coords\");\n    this.gl.enableVertexAttribArray(this.attributeCoords);\n    this.bufferCoords = this.gl.createBuffer();\n\n    // Set up normals for sending to each vertex\n    this.attributeNormals = this.gl.getAttribLocation(program, \"a_normals\");\n    this.gl.enableVertexAttribArray(this.attributeNormals);\n    this.normalBuffer = this.gl.createBuffer();\n\n    // Grab uniform memory references\n    this.uniformColor = this.gl.getUniformLocation(program, \"u_color\");\n    this.uniformWorldViewProjection = this.gl.getUniformLocation(\n      program,\n      \"u_worldViewProjection\"\n    );\n    this.uniformWorldInverseTranspose = this.gl.getUniformLocation(\n      program,\n      \"u_worldInverseTranspose\"\n    );\n    this.uniformReverseLightDirectionLocation = this.gl.getUniformLocation(\n      program,\n      \"u_reverseLightDirection\"\n    );\n\n    // configure canvas resolution and clear the canvas\n    const uniformResolution = this.gl.getUniformLocation(\n      program,\n      \"u_resolution\"\n    );\n    this.gl.uniform2f(\n      uniformResolution,\n      this.gl.canvas.width,\n      this.gl.canvas.height\n    );\n    this.clearCanvas();\n  }\n\n  private clearCanvas() {\n    this.gl.clearColor(0, 0, 0, 0);\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n  }\n\n  render(shapes: Canvas3D.Shape[], camera: Camera, light: Light) {\n    this.renderSetup();\n\n    if (shapes.length === 0) {\n      this.clearCanvas();\n      return;\n    }\n\n    // Apply projection matrix based on camera\n    const canvas = this.gl.canvas as HTMLCanvasElement;\n    const aspect = canvas.clientWidth / canvas.clientHeight;\n    const cameraViewProjectionMatrix = camera.getViewProjectionMatrix(aspect);\n    const worldViewProjectionMatrix = this.computeWorldViewProjectionMatrix(\n      cameraViewProjectionMatrix\n    );\n\n    // Set lighting direction\n    this.gl.uniform3fv(\n      this.uniformReverseLightDirectionLocation,\n      light.getNormalizedDirection()\n    );\n\n    shapes.forEach((shape) => {\n      this.gl.uniform4f(\n        this.uniformColor,\n        shape.color.red,\n        shape.color.green,\n        shape.color.blue,\n        1\n      );\n\n      // compute transformation matrix\n      const M = this.computeModelViewMatrix(shape, worldViewProjectionMatrix);\n      this.gl.uniformMatrix4fv(this.uniformWorldViewProjection, false, M);\n\n      renderShape({\n        context: this.gl,\n        shape,\n        bufferCoords: this.bufferCoords,\n        normalBuffer: this.normalBuffer,\n      });\n    });\n  }\n\n  private renderSetup() {\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.bufferCoords);\n    this.gl.vertexAttribPointer(\n      this.attributeCoords,\n      DIMENSIONS,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.normalBuffer);\n    this.gl.vertexAttribPointer(\n      this.attributeNormals,\n      3,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n\n    // this.gl.enable(this.gl.CULL_FACE);\n    this.gl.enable(this.gl.DEPTH_TEST);\n  }\n\n  private computeWorldViewProjectionMatrix(viewProjectionMatrix: number[]) {\n    const worldMatrix = m4.identity();\n    const worldViewProjectionMatrix = m4.multiply(\n      viewProjectionMatrix,\n      worldMatrix\n    );\n    const worldInverseMatrix = m4.inverse(worldMatrix);\n    const worldInverseTransposeMatrix = m4.transpose(worldInverseMatrix);\n\n    this.gl.uniformMatrix4fv(\n      this.uniformWorldViewProjection,\n      false,\n      worldViewProjectionMatrix\n    );\n    this.gl.uniformMatrix4fv(\n      this.uniformWorldInverseTranspose,\n      false,\n      worldInverseTransposeMatrix\n    );\n\n    return worldViewProjectionMatrix;\n  }\n\n  private computeModelViewMatrix(\n    shape: Canvas3D.Shape,\n    viewProjectionMatrix: number[]\n  ) {\n    let M = m4.translate(\n      viewProjectionMatrix,\n      shape.translation.x,\n      shape.translation.y,\n      shape.translation.z\n    );\n    M = m4.xRotate(M, degreesToRadians(shape.rotation.x));\n    M = m4.yRotate(M, degreesToRadians(shape.rotation.y));\n    M = m4.zRotate(M, degreesToRadians(shape.rotation.z));\n    M = m4.scale(M, shape.scale.x, shape.scale.y, shape.scale.z);\n    return M;\n  }\n\n  /**\n   * ========================================\n   * Scenes are singletons\n   * ========================================\n   */\n  private static instance?: Scene;\n  static getInstance() {\n    if (!Scene.instance) {\n      throw new Error(\"Scene not initialized with call to `init`\");\n    }\n    return Scene.instance;\n  }\n  static init(\n    canvas: HTMLCanvasElement,\n    vertexShaderSource: string,\n    fragmentShaderSource: string\n  ) {\n    Scene.instance = new Scene(\n      canvas,\n      vertexShaderSource,\n      fragmentShaderSource\n    );\n    return Scene.instance;\n  }\n}\n","import { degreesToRadians, radiansToDegrees } from \"@common/util/degrees\";\nimport m4 from \"@common/util/m4\";\n\nconst UP = [0, 1, 0];\nconst Z_NEAR = 1;\nconst Z_FAR = 2000;\n\nexport interface CameraSettings {\n  fovDegrees: number;\n  translation: Canvas3D.Translation;\n  rotation?: Canvas3D.Translation;\n  target?: Canvas3D.Position;\n}\n\nexport default class Camera {\n  rotation: Canvas3D.Rotation;\n  translation: Canvas3D.Translation;\n  private target?: Canvas3D.Position;\n  private fovRadians: number;\n\n  constructor() {\n    this.rotation = { x: 0, y: 0, z: 0 };\n    this.translation = { x: 0, y: 0, z: 0 };\n    this.fovRadians = degreesToRadians(60);\n  }\n\n  setTarget(position: Canvas3D.Position) {\n    this.target = position;\n  }\n\n  removeTarget() {\n    this.target = undefined;\n  }\n\n  getFOVDegrees() {\n    return radiansToDegrees(this.fovRadians);\n  }\n\n  setFOV(fovDegrees: number) {\n    this.fovRadians = degreesToRadians(fovDegrees);\n  }\n\n  getViewProjectionMatrix(aspect: number) {\n    const viewMatrix = this.getViewMatrix();\n    const projectionMatrix = m4.perspective(\n      this.fovRadians,\n      aspect,\n      Z_NEAR,\n      Z_FAR\n    );\n    return m4.multiply(projectionMatrix, viewMatrix);\n  }\n\n  private getViewMatrix() {\n    let cameraMatrix = m4.identity();\n    if (this.target !== undefined) {\n      cameraMatrix = this.applyTranslation(cameraMatrix);\n      // Here, we invert the position since it gets inverted back below\n      const cameraPosition = [\n        -cameraMatrix[12],\n        -cameraMatrix[13],\n        -cameraMatrix[14],\n      ];\n\n      cameraMatrix = m4.lookAt(cameraPosition, this.getTargetAsMatrix(), UP);\n      cameraMatrix = m4.inverse(cameraMatrix);\n    } else {\n      cameraMatrix = this.applyRotation(cameraMatrix);\n      cameraMatrix = this.applyTranslation(cameraMatrix);\n    }\n    return cameraMatrix;\n  }\n\n  private getTargetAsMatrix() {\n    return [this.target.x, this.target.y, this.target.z];\n  }\n\n  private applyRotation(matrix: number[]) {\n    matrix = m4.zRotate(matrix, degreesToRadians(this.rotation.z));\n    matrix = m4.xRotate(matrix, degreesToRadians(this.rotation.x));\n    matrix = m4.yRotate(matrix, degreesToRadians(this.rotation.y));\n\n    return matrix;\n  }\n\n  private applyTranslation(matrix: number[]) {\n    return m4.translate(\n      matrix,\n      this.translation.x,\n      this.translation.y,\n      this.translation.z\n    );\n  }\n\n  static fromSettings(cameraSettings: CameraSettings): Camera {\n    const camera = new Camera();\n    camera.setFOV(cameraSettings.fovDegrees);\n    camera.translation = cameraSettings.translation;\n    if (cameraSettings.rotation) {\n      camera.rotation = cameraSettings.rotation;\n    }\n    if (cameraSettings.target) {\n      camera.setTarget(cameraSettings.target);\n    }\n    return camera;\n  }\n}\n","import m4 from \"@common/util/m4\";\n\nexport interface LightSettings {\n  direction: Canvas3D.Vector3;\n}\n\nexport default class Light {\n  direction: Canvas3D.Vector3;\n\n  constructor() {\n    this.direction = { x: 0, y: 0, z: 0 };\n  }\n\n  getNormalizedDirection() {\n    const { x, y, z } = this.direction;\n    return m4.normalize([x, y, z]);\n  }\n\n  static fromSettings(settings: LightSettings): Light {\n    const light = new Light();\n    light.direction = settings.direction;\n    return light;\n  }\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport { useScene } from \"../hooks/useScene\";\nimport Camera, { CameraSettings } from \"../webgl/Camera\";\nimport Light, { LightSettings } from \"../webgl/Light\";\n\ninterface Props {\n  shapes: Canvas3D.Shape[];\n  cameraSettings: CameraSettings;\n  lightSettings: LightSettings;\n  onClick: (translation: Canvas3D.Translation) => void;\n}\n\nconst Canvas = ({ shapes, cameraSettings, lightSettings, onClick }: Props) => {\n  const { scene, canvasRef } = useScene({\n    fragmentId: \"fragment-shader-3d\",\n    vertexId: \"vertex-shader-3d\",\n  });\n  const [camera, setCamera] = useState(Camera.fromSettings(cameraSettings));\n  const [light, setLight] = useState(Light.fromSettings(lightSettings));\n\n  // Rebuild camera each time settings change\n  useEffect(() => {\n    setCamera(Camera.fromSettings(cameraSettings));\n  }, [setCamera, cameraSettings]);\n\n  // Rebuild light source each time settings change\n  useEffect(() => {\n    setLight(Light.fromSettings(lightSettings));\n  }, [setLight, lightSettings]);\n\n  useEffect(() => {\n    if (scene) {\n      scene.render(shapes, camera, light);\n    }\n  }, [scene, camera, light, shapes]);\n\n  const onMouseDown = (event: React.MouseEvent<HTMLCanvasElement>) => {\n    const boundingRectangle = (event.target as HTMLCanvasElement).getBoundingClientRect();\n    const x = Math.round(\n      event.clientX - boundingRectangle.left - boundingRectangle.width / 2\n    );\n    const y = -Math.round(\n      event.clientY - boundingRectangle.top - boundingRectangle.height / 2\n    );\n    const translation = { x, y, z: -150 };\n    onClick(translation);\n  };\n  return (\n    <canvas\n      id=\"canvas\"\n      width=\"570px\"\n      height=\"300px\"\n      className=\"mb-3\"\n      onMouseDown={onMouseDown}\n      ref={canvasRef}\n    ></canvas>\n  );\n};\n\nexport default Canvas;\n","import { getScriptContentsById } from \"@common/setup/getScriptContentsById\";\nimport { RefObject, useEffect, useRef, useState } from \"react\";\n\nimport Scene from \"../webgl/Scene\";\n\ninterface UseSceneOptions {\n  fragmentId: string;\n  vertexId: string;\n}\n\ninterface UseStateValues {\n  scene: Scene | null;\n  canvasRef: RefObject<HTMLCanvasElement>;\n}\n\nexport const useScene = (options: UseSceneOptions): UseStateValues => {\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const [scene, setScene] = useState<Scene | null>(null);\n  const [hasRendered, setHasRendered] = useState(false);\n\n  // Rebuild scene if options or canvas reference is modified\n  useEffect(() => {\n    const { current } = canvasRef;\n    if (!hasRendered) {\n      setHasRendered(true);\n    } else if (current !== null) {\n      setScene(\n        Scene.init(\n          canvasRef.current,\n          getScriptContentsById(options.vertexId),\n          getScriptContentsById(options.fragmentId)\n        )\n      );\n    }\n  }, [options.fragmentId, options.vertexId, canvasRef.current]);\n\n  return { scene, canvasRef };\n};\n","import { buildShape } from \"@common/model/canvas3DShapeBuilders\";\nimport { hexToRgb } from \"@common/util/colors\";\n\nimport { CameraSettings } from \"../webgl/Camera\";\nimport { LightSettings } from \"../webgl/Light\";\n\nconst ORIGIN: Canvas3D.Position = { x: 0, y: 0, z: 0 };\nconst SIZE_ONE: Canvas3D.Dimensions = { width: 1, height: 1, depth: 1 };\nconst RED_RGB = hexToRgb(\"#FF0000\");\nconst GREEN_RGB = hexToRgb(\"#00FF00\");\nconst BLUE_RGB = hexToRgb(\"#0000FF\");\n\nconst BLUE_CUBE = buildShape(\"CUBE\", {\n  position: ORIGIN,\n  dimensions: SIZE_ONE,\n  color: BLUE_RGB,\n  translation: { x: 0, y: 0, z: 0 },\n  scale: { x: 15, y: 15, z: 15 },\n  rotation: { x: 0, y: 0, z: 0 },\n});\n\nconst GREEN_CUBE = buildShape(\"CUBE\", {\n  position: ORIGIN,\n  dimensions: SIZE_ONE,\n  color: GREEN_RGB,\n  translation: { x: 20, y: 0, z: 0 },\n  scale: { x: 15, y: 15, z: 15 },\n  rotation: { x: 0, y: 0, z: 0 },\n});\n\nconst RED_CUBE = buildShape(\"CUBE\", {\n  position: ORIGIN,\n  dimensions: SIZE_ONE,\n  color: RED_RGB,\n  translation: { x: -20, y: 0, z: 0 },\n  scale: { x: 15, y: 15, z: 15 },\n  rotation: { x: 0, y: 0, z: 0 },\n});\n\nexport const DEFAULT_SHAPES = [BLUE_CUBE, GREEN_CUBE, RED_CUBE];\n\nexport const DEFAULT_CAMERA_SETTINGS: CameraSettings = {\n  fovDegrees: 90,\n  target: undefined,\n  translation: { x: -45, y: -35, z: 21 },\n  rotation: { x: 40, y: 235, z: 0 },\n};\n\nexport const DEFAULT_LIGHT_SETTINGS: LightSettings = {\n  direction: { x: 0.4, y: 0.3, z: -0.5 },\n};\n","import FormColor from \"@common/components/form/FormColor\";\nimport FormVector3 from \"@common/components/form/FormVector3\";\nimport React, { Component } from \"react\";\n\ninterface Props {\n  activeShape: Canvas3D.Shape;\n  onUpdate: (shape: Canvas3D.Shape) => void;\n  onDelete: () => void;\n}\n\nclass EditShape extends Component<Props> {\n  renderDeleteButton() {\n    const onClick = (event: React.MouseEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n      this.props.onDelete();\n    };\n    return (\n      <div className=\"form-row\">\n        <div className=\"form-group col-md-12\">\n          <button\n            id=\"addShape\"\n            className=\"btn btn-secondary btn-block\"\n            onClick={onClick}\n          >\n            Delete Shape\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { translation, scale, rotation, color } = this.props.activeShape;\n\n    return (\n      <form>\n        <FormVector3\n          title=\"Translation\"\n          value={translation}\n          step={5}\n          onChange={this.onVectorUpdate(\"translation\")}\n        />\n        <FormVector3\n          title=\"Scale\"\n          value={scale}\n          step={0.5}\n          onChange={this.onVectorUpdate(\"scale\")}\n        />\n        <FormVector3\n          title=\"Rotation\"\n          value={rotation}\n          step={2}\n          onChange={this.onVectorUpdate(\"rotation\")}\n        />\n        <FormColor color={color} onChange={this.onColorUpdate} />\n        {this.renderDeleteButton()}\n      </form>\n    );\n  }\n\n  private onVectorUpdate = (key: \"translation\" | \"scale\" | \"rotation\") => (\n    value: Canvas3D.Vector3\n  ) => {\n    if (key === \"rotation\") {\n      value = { x: value.x % 360, y: value.y % 360, z: value.z % 360 };\n    }\n    const { onUpdate, activeShape } = this.props;\n    onUpdate({ ...activeShape, [key]: value });\n  };\n\n  private onColorUpdate = (color: Canvas3D.Color) => {\n    const { onUpdate, activeShape } = this.props;\n    onUpdate({ ...activeShape, color: color });\n  };\n}\n\nexport default EditShape;\n","import React, { Component } from \"react\";\n\nimport { LightSettings } from \"../../webgl/Light\";\n\ninterface Props {\n  lightSettings: LightSettings;\n  onChange(lightSettings: LightSettings): void;\n}\n\nexport default class LightSettingsForm extends Component<Props> {\n  private onChange = (axis: keyof Canvas3D.Vector3) => (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const value = Number(event.target.value);\n    const newDirection = {\n      ...this.props.lightSettings.direction,\n      [axis]: value,\n    };\n    this.props.onChange({\n      ...this.props.lightSettings,\n      direction: newDirection,\n    });\n  };\n\n  render() {\n    const { x, y, z } = this.props.lightSettings.direction;\n    return (\n      <form>\n        <div className=\"form-group row\">\n          <label htmlFor=\"dlrx\" className=\"col-auto col-form-label\">\n            X\n          </label>\n          <div className=\"col\">\n            <input\n              type=\"range\"\n              className=\"form-control form-control-range\"\n              id=\"dlrx\"\n              value={x}\n              min=\"-1\"\n              max=\"1\"\n              step=\"0.1\"\n              onChange={this.onChange(\"x\")}\n            />\n          </div>\n        </div>\n        <div className=\"form-group row\">\n          <label htmlFor=\"dlry\" className=\"col-auto col-form-label\">\n            Y\n          </label>\n          <div className=\"col\">\n            <input\n              type=\"range\"\n              className=\"form-control form-control-range\"\n              id=\"dlry\"\n              value={y}\n              min=\"-1\"\n              max=\"1\"\n              step=\"0.1\"\n              onChange={this.onChange(\"y\")}\n            />\n          </div>\n        </div>\n        <div className=\"form-group row\">\n          <label htmlFor=\"dlrz\" className=\"col-auto col-form-label\">\n            Z\n          </label>\n          <div className=\"col\">\n            <input\n              type=\"range\"\n              className=\"form-control form-control-range\"\n              id=\"dlrz\"\n              value={z}\n              min=\"-1\"\n              max=\"1\"\n              step=\"0.1\"\n              onChange={this.onChange(\"z\")}\n            />\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n","import { toFirstUpperCase } from \"@common/util/strings\";\nimport React from \"react\";\n\ninterface Props {\n  shapes: Canvas3D.Shape[];\n  activeShapeIndex: number;\n  onSelect: (shapeIndex: number) => void;\n}\n\nconst ShapeList = ({ shapes, activeShapeIndex, onSelect }: Props) => {\n  return (\n    <div className=\"list-group list-group-flush\">\n      {shapes.map((shape, index) => {\n        const classList = [\"list-group-item\", \"list-group-item-action\"];\n        if (index === activeShapeIndex) {\n          classList.push(\"active\");\n        }\n        return (\n          <button\n            key={index}\n            className={classList.join(\" \")}\n            onClick={() => onSelect(index)}\n          >\n            <div className=\"d-flex justify-content-between align-items-center\">\n              <p className=\"mb-0\">{toFirstUpperCase(shape.type)}</p>\n              <small>\n                X: {shape.translation.x} Y: {shape.translation.y} Z:{\" \"}\n                {shape.translation.z}\n              </small>\n            </div>\n          </button>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default ShapeList;\n","import Card from \"@common/components/Card\";\nimport NavBar from \"@common/components/NavBar\";\nimport { buildShape } from \"@common/model/canvas3DShapeBuilders\";\nimport { objectEquality } from \"@common/util/objects\";\nimport React, { Component } from \"react\";\n\nimport { CameraSettings } from \"../webgl/Camera\";\nimport { LightSettings } from \"../webgl/Light\";\nimport AddShape from \"./add/AddShape\";\nimport CameraSettingsForm from \"./camera/CameraSettingsForm\";\nimport Canvas from \"./Canvas\";\nimport {\n  DEFAULT_CAMERA_SETTINGS,\n  DEFAULT_LIGHT_SETTINGS,\n  DEFAULT_SHAPES,\n} from \"./constants\";\nimport EditShape from \"./edit/EditShape\";\nimport LightSettingsForm from \"./light/LightSettingsForm\";\nimport ShapeList from \"./list/ShapeList\";\n\ninterface Props {}\n\ninterface State {\n  shapes: Canvas3D.Shape[];\n  selectedShapeIndex: number;\n  addShapeConfig: Partial<Canvas3D.Shape>;\n  cameraSettings: CameraSettings;\n  lightSettings: LightSettings;\n}\n\nclass App extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      shapes: DEFAULT_SHAPES,\n      selectedShapeIndex: 0,\n      addShapeConfig: {},\n      cameraSettings: DEFAULT_CAMERA_SETTINGS,\n      lightSettings: DEFAULT_LIGHT_SETTINGS,\n    };\n  }\n\n  renderAddCard() {\n    return (\n      <Card\n        title=\"Add Shape\"\n        subtitle=\"Select a shape type before clicking on the canvas\"\n      >\n        <AddShape onConfigChange={this.onConfigChange} />\n      </Card>\n    );\n  }\n\n  private onConfigChange = (addShapeConfig: Partial<Canvas3D.Shape>) =>\n    this.setState({ addShapeConfig });\n\n  renderListCard() {\n    return (\n      <Card title=\"Shape List\" subtitle=\"Pick a shape to edit\">\n        <div style={{ maxHeight: 540, overflow: \"auto\" }}>\n          <ShapeList\n            shapes={this.state.shapes}\n            activeShapeIndex={this.state.selectedShapeIndex}\n            onSelect={this.onShapeIndexSelect}\n          />\n        </div>\n      </Card>\n    );\n  }\n\n  private onShapeIndexSelect = (selectedShapeIndex: number) =>\n    this.setState({ selectedShapeIndex });\n\n  renderEditCard() {\n    const activeShape = this.getActiveShape();\n\n    return (\n      <Card title=\"Shape Edits\" subtitle=\"Perform edits on the selected shape\">\n        {activeShape ? (\n          <EditShape\n            activeShape={activeShape}\n            onUpdate={this.onUpdateShape}\n            onDelete={this.onDeleteShape}\n          />\n        ) : (\n          <p>Please add a shape to continue</p>\n        )}\n      </Card>\n    );\n  }\n\n  private getActiveShape = () =>\n    this.state.shapes[this.state.selectedShapeIndex];\n\n  private onUpdateShape = (shape: Canvas3D.Shape) => {\n    const { shapes, selectedShapeIndex } = this.state;\n    // Short circuit if both equal\n    if (objectEquality(shapes[selectedShapeIndex], shape)) {\n      return;\n    }\n    const newShapes = [...shapes];\n    newShapes[selectedShapeIndex] = shape;\n    this.setState({ shapes: newShapes });\n  };\n\n  private onDeleteShape = () => {\n    const shapes = [...this.state.shapes];\n    shapes.splice(this.state.selectedShapeIndex, 1);\n    let selectedShapeIndex = this.state.selectedShapeIndex;\n    if (selectedShapeIndex >= shapes.length) {\n      selectedShapeIndex = Math.max(shapes.length - 1, 0);\n    }\n    this.setState({\n      shapes,\n      selectedShapeIndex,\n    });\n  };\n\n  renderLightCard() {\n    return (\n      <Card\n        title=\"Light Settings\"\n        subtitle=\"Control the source of a point light\"\n      >\n        <LightSettingsForm\n          lightSettings={this.state.lightSettings}\n          onChange={(lightSettings) => this.setState({ lightSettings })}\n        />\n      </Card>\n    );\n  }\n\n  renderFOVCard() {\n    return (\n      <Card\n        title=\"Camera Settings\"\n        subtitle=\"Performs translations of the world around the camera\"\n      >\n        <CameraSettingsForm\n          cameraSettings={this.state.cameraSettings}\n          onChange={(cameraSettings) => this.setState({ cameraSettings })}\n        />\n      </Card>\n    );\n  }\n\n  render() {\n    const { shapes, cameraSettings, lightSettings } = this.state;\n    return (\n      <div className=\"container mb-4\">\n        <NavBar title=\"Lighting and Shading\" />\n        <div className=\"row\">\n          <div className=\"col\">\n            <div className=\"mb-4 w-100\">\n              <Canvas\n                onClick={this.onAddShape}\n                shapes={shapes}\n                cameraSettings={cameraSettings}\n                lightSettings={lightSettings}\n              />\n            </div>\n            <div className=\"mb-4 w-100\">{this.renderAddCard()}</div>\n            <div className=\"mb-4 w-100\">{this.renderListCard()}</div>\n          </div>\n          <div className=\"col\">\n            <div className=\"mb-4 w-100\">{this.renderLightCard()}</div>\n            <div className=\"mb-4 w-100\">{this.renderFOVCard()}</div>\n            <div className=\"w-100\">{this.renderEditCard()}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  private onAddShape = (translation: Canvas3D.Translation) => {\n    const shape = buildShape(this.state.addShapeConfig.type, {\n      ...this.state.addShapeConfig,\n      translation,\n      rotation: { x: 0, y: 0, z: 180 },\n      scale: { x: 20, y: 20, z: 20 },\n    });\n    const newShapes = [...this.state.shapes, shape];\n    this.setState({ shapes: newShapes });\n  };\n}\n\nexport default () => <App />;\n","import ReactDOM from \"react-dom\";\n\nimport App from \"./components/App\";\n\n// Assign some functions to window\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const domContainer = document.getElementById(\"assignment-7-container\");\n  ReactDOM.render(App(), domContainer);\n});\n"],"sourceRoot":""}